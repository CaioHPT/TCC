<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brothers Car</title>
    <link rel="stylesheet" href="bootstrap-4.1.3-dist/css/bootstrap.min.css">
    <link rel="shortcut icon" href="images/logo-tamanho-certo.png" type="image/x-icon">
    <link rel="stylesheet" href="css/catalogo.css">
</head>

<body>

    <span class="sticky-top" data-target="#Filtro" data-toggle="collapse">
        <svg xmlns="http://www.w3.org/2000/svg" width="30" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
            <path
                d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
        </svg>
    </span>


    <header>
        <nav class="navbar navbar-expand-lg navBar">
            <div class="container-fluid">
                <img src="images/logo-tamanho-certo.png" alt="">

                <div class="navbar-header">
                    <button type="button" class='navbar-toggler' data-toggle="collapse" data-target="#navSite">
                        <svg xmlns="http://www.w3.org/2000/svg" width="50" height="40" style="color:#fff;"
                            fill="currentColor" class="bi bi-justify" viewBox="0 0 16 16">
                            <path fill-rule="evenodd"
                                d="M2 12.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z" />
                        </svg>
                    </button>
                </div>

                <nav class="collapse navbar-collapse pl-1" id="navSite">
                    <ul class="nav navbar-nav mr-auto ">
                        <li class="nav-item">
                            <a class="nav-link" href="/">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/catalogo">Catalogo</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/login">Conta</a>
                        </li>
                    </ul>
                    <% if (user == null || user == undefined || user == '') { %>
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="/cadastro">Sign up</a>
                            </li>
                            <a href="/incluircarro"><button class="btnNav">+ Sell Car</button></a>
                        </ul>
                    <% } else { %>
                        <ul class="navbar-nav ml-auto">
                            <li style="margin-top: 6px; margin-right: 20px ;color : white;" class="nav-item">
                                Bem vindo, <%=user.email %>
                            </li>
                            <a href="/incluircarro"><button class="btnNav">+ Sell Car</button></a>
                        </ul>
                    <% } %>
                </nav>
            </div>
        </nav>
    </header>

    <div class="container-fluid">
        <div class="row">
            <div class="col-md-3 col-sm-12 collapse show" id="Filtro">
                <div class="row mt-2">
                    <span>
                        <h5>
                            <button class="btnBusca activeBusca" id="btnUsado">
                                Usados
                            </button>
                        </h5>
                    </span>
                </div>
                <form action="/catalogoBuscar" method="POST">
                    <div class="col-sm-12 p-3 mt-2 col p-3 mb-5 bg-white localizacao">
                        <p>Localização</p>
                        
                        <div class="mb-3">
                            <input type="search" id="inputLocalizacao" name="localizacao"
                            placeholder="Digite seu estado ou cidade" class="form-control"
                        >
                        </div>
                    </div>
                    <div class="col-sm-12 mt-5 ml-1 text-center divMarcas">
                        <h6 class="mb-4">Marca do Carro</h6>
                        <select name="marca"  id="selectmontadora">
                            <option  selected>-- Selecione a Marca</option>
                        </select>
                    </div>
                    
                    <p class="mt-4 ml-1 mb-2">Ano</p>
                    <div class="form-group form-check">
                        <input class='check' name="checkAno" type="checkbox" class="form-check-input" value="0">
                        <label class="form-check-label">Usar ano como filtro</label>
                    </div>
                    <div class="row">
                        <div class="col">
                            <input disabled="disabled" type="number" name="anode" class="form-control" id="anode" placeholder="De">
                            <small>
                                <p class="ml-1">Ex. 2014</p>
                            </small>
                        </div>
                        <div class="col">
                            <input disabled="disabled" type="number" name="anoate" class="form-control" id="anoate" placeholder="Até">
                            <small>
                                <p class="ml-1">Ex. 2021</p>
                            </small>
                        </div>
                    </div>

                    <p class="mt-3 ml-1 mb-2">Preço</p>
                    <div class="form-group form-check">
                        <input class='check' name="checkPreco" type="checkbox" class="form-check-input" value="0">
                        <label class="form-check-label">Usar preço como filtro</label>
                    </div>
                    <div class="row">
                        <div class="col">
                            <input disabled="disabled" type="number" name="precode" class="form-control" id="precode" placeholder="De">
                            <small>
                                <p class="ml-1">Ex 50.000</p>
                            </small>
                        </div>
                        <div class="col">
                            <input disabled="disabled" type="number" name="precoate" class="form-control" id="precoate" placeholder="Até">
                            <small>
                                <p class="ml-1">Ex. 200.000</p>
                            </small>
                        </div>
                    </div>

                    <p class="mt-3 ml-1 mb-2">Quilometragem</p>
                    <div class="form-group form-check">
                        <input class='check' name="checkKm" type="checkbox" class="form-check-input" value="0">
                        <label class="form-check-label">Usar quilômetragem como filtro</label>
                    </div>
                    <div class="row">
                        <div class="col">
                            <input disabled="disabled" type="number" name="kmde" class="form-control" id="kmde" placeholder="De">
                            <small>
                                <p class="ml-1">Ex. 0km</p>
                            </small>
                        </div>
                        <div class="col">
                            <input disabled="disabled" type="number" name="kmate" class="form-control" id="kmate" placeholder="Até">
                            <small>
                                <p class="ml-1">Ex. 25km</p>
                            </small>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col divBuscar">
                            <button type="submit">Buscar</button>
                        </div>
                    </div>
                </form>
            </div>
            <div class="col-sm-12 col-md-9 mt-2" id="main">
                <div class="col-1">
                    <button type="button" class="btn btn-outline-dark m-2">Brasil</button>
                </div>
                <div class="col-12 mt-2 pt-3 shadow-lg p-3 mb-5 mt-3 bg-white rounded">
                    <div class="headerInfo">
                        <h6>Home > <strong>Carros</strong></h6>
                        <h4>Carros novos e usados em todo o Brasil</h4>
                        <p><%=carros.length %> carros encontrados</p>
                    </div>

                    <!-- Carrousels -->
                    <div class="row row-cols-1 row-cols-md-3 g-4 m-2">
                        
                        <% for (var i=0; i<Object.keys(carros).length; i++) { %>
                        <div class="col-xl-3 col-lg-3 col-md-4 col-sm-4 col-12">
                            <div class="card mb-3">
                                <div id="carousel<%=carros[i].id %>" class="carousel slide" data-ride="carousel" data-interval="0">
                                    <ol class="carousel-indicators">
                                        <li data-target="#carousel<%=carros[i].id %>" data-slide-to="0" class="active"></li>
                                        <li data-target="#carousel<%=carros[i].id %>" data-slide-to="1"></li>
                                        <li data-target="#carousel<%=carros[i].id %>" data-slide-to="2"></li>
                                    </ol>

                                   <% for (var j=0; j<Object.keys(fotos).length; j++) { %>

                                       <% if (fotos[j].id_carro == carros[i].id) { %>
                                        <div class="carousel-inner">
                                            <div class="carousel-item active">
                                                <img src="<%=fotos[j].foto1 %>" class="img-carousel-item" alt="...">
                                            </div>
                                            <div class="carousel-item">
                                                <img src="<%=fotos[j].foto2 %>" class="img-carousel-item" alt="...">
                                            </div>
                                            <div class="carousel-item">
                                                <img src="<%=fotos[j].foto3 %>" class="img-carousel-item" alt="...">
                                            </div>
                                        </div>
                                        <% } %>

                                    <% } %>
                                    <a class="carousel-control-prev" href="#carousel<%=carros[i].id %>" role="button" data-slide="prev">
                                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                        <span class="sr-only">Previous</span>
                                    </a>
                                    <a class="carousel-control-next" href="#carousel<%=carros[i].id %>" role="button" data-slide="next">
                                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                        <span class="sr-only">Next</span>
                                    </a>
                                </div>
                                <div class="card-body">
                                    <h5 class="card-title text-left"><%= carros[i].modelo %></h5>
                                    <p class="card-text"><%= carros[i].cambio %>, <%=carros[i].combustivel %></p>
                                    <h6><%=Number(carros[i].preco).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' }) ;%>
                                    </h6>
                                    <small><%= (parseInt(carros[i].quilometragem)).toLocaleString('pt-BR') %> KMs rodados</small>
                                    <small> <%= carros[i].anomodelo %> / <%= carros[i].anofabricacao %> </small>
                                </div>
                            </div>
                        </div>
                        <% } %>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>

    </footer>
    <script src="js/scriptCatalogo.js"></script>
    <script src="js/scriptfiltro.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="bootstrap-4.1.3-dist/js/bootstrap.min.js"></script>
</body>

</html>